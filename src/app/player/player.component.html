<div class="player"  #player>
    <div class="left">
      <div class="image">
        <ng-container *ngIf="currentTrack.cover; else other">
          <img src="{{currentTrack.cover}}" alt="cover">
        </ng-container>
        <ng-template #other>
          <img *ngIf="currentTrack.album" src="{{currentTrack.album?.cover}}" alt="cover">
          <img *ngIf="!currentTrack.album" src="{{currentTrack.owner.cover}}" alt="cover">
        </ng-template>

      </div>
      <div class="info">
        <p class="title">{{currentTrack.title}}
          <img *ngIf="currentTrack.explicit" src="assets/icons-svg/explicit.svg" width="15" height="15"/>
        </p>
        <div class="other">
          <a routerLink="/artists/{{currentTrack.owner.id}}">{{currentTrack.owner.name}}</a>
          <ng-container *ngIf="currentTrack.features.length > 0">
            ft.
            <ng-container *ngFor="let feature of currentTrack.features; let index = index">
              <a routerLink="/artists/{{feature.id}}">{{feature.name}}</a>
              <ng-container *ngIf="index !== currentTrack.features.length - 1">,&nbsp;</ng-container>
            </ng-container>
          </ng-container>
        </div>

        <p *ngIf="from.name !== 'search'"><span>Playing from: &nbsp;</span> <a routerLink="/{{from.url}}">{{from.name}}</a></p>
      </div>
    </div>
  <div class="middle">
    <div class="top">
      <button *ngIf="!shuffle1; else shuffle" class="action-button optional" (click)="toggleShuffle()">
        <mat-icon [style.color]="'#fff'" class="smaller-1">shuffle</mat-icon>
      </button>
      <ng-template #shuffle>
        <button class="action-button optional" (click)="toggleShuffle()">
          <mat-icon [style.color]="'var(--main-color)'" class="smaller-1">shuffle</mat-icon>
        </button>
      </ng-template>
      <button class="action-button" (click)="goPrevious()">
        <mat-icon [style.color]="'#fff'" class="smaller">skip_previous</mat-icon>
      </button>
      <button *ngIf="!audioService.isPlaying; else paused" class="action-button play" (click)="continue()">
        <mat-icon [style.color]="'#fff'" class="bigger">play_circle_filled</mat-icon>
      </button>
      <ng-template #paused>
        <button class="action-button" (click)="pause()">
          <mat-icon [style.color]="'#fff'" class="bigger">pause_circle_filled</mat-icon>
        </button>
      </ng-template>

      <button class="action-button" (click)="goForward()">
        <mat-icon [style.color]="'#fff'" class="smaller">skip_next</mat-icon>
      </button>
      <button *ngIf="audioService.repeatIndex === 0" class="action-button optional" (click)="toggleRepeat()">
        <mat-icon [style.color]="'#fff'" class="smaller-1">repeat</mat-icon>
      </button>
      <button *ngIf="audioService.repeatIndex === 1" class="action-button optional" (click)="toggleRepeat()">
        <mat-icon [style.color]="'var(--main-color)'" class="smaller-1">repeat</mat-icon>
      </button>
      <button *ngIf="audioService.repeatIndex === 2" class="action-button optional" (click)="toggleRepeat()">
        <mat-icon [style.color]="'var(--main-color)'" class="smaller-1">repeat_one</mat-icon>
      </button>
    </div>
    <div class="bottom">
      <p>{{audioService.currentTime | duration}}</p>
      <mat-slider class="slider" discrete [displayWith]="formatTime" step="0" [max]="audioService.duration" [min]="0">
        <input #slider matSliderThumb [value]="audioService.currentTime" [min]="0" [max]="audioService.duration" type="range" (change)="seekTo(slider.value)" class="slider">
      </mat-slider>
      <p>{{audioService.duration | duration}}</p>
    </div>
  </div>
  <div class="right">
    <button (click)="toggleQueue()">
      <mat-icon [style.color]="'#fff'" class="icon">queue_music</mat-icon>
    </button>
    <button (click)="toggleMuteVolume()">
      <mat-icon [style.color]="'#fff'" class="icon" *ngIf="!audioService.audio.muted && audioService.audio.volume >= 0.8">volume_up</mat-icon>
      <mat-icon [style.color]="'#fff'" class="icon" *ngIf="audioService.audio.volume > 0 && audioService.audio.volume < 0.8 && !audioService.audio.muted">volume_down</mat-icon>
      <mat-icon [style.color]="'#fff'" class="icon" *ngIf="audioService.audio.muted">volume_off</mat-icon>
      <mat-icon [style.color]="'#fff'" class="icon" *ngIf="audioService.audio.volume == 0 && !audioService.audio.muted">volume_mute</mat-icon>
    </button>

    <mat-slider class="slider" step="0.0001" [max]="1" [min]="0">
      <input #sliderVolume matSliderThumb [value]="audioService.audio.volume" [min]="0" [max]="1" type="range" (input)="changeVolume(sliderVolume.value)" class="slider">
    </mat-slider>

  </div>
</div>
